<properties
   pageTitle="Spróbuj ponownie ogólne wskazówki | Microsoft Azure"
   description="Wytyczne dotyczące ponów próbę obsługi błędów przejściowych."
   services=""
   documentationCenter="na"
   authors="dragon119"
   manager="christb"
   editor=""
   tags=""/>

<tags
   ms.service="best-practice"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="na"
   ms.date="07/13/2016"
   ms.author="masashin"/>

# <a name="retry-general-guidance"></a>Spróbuj ponownie ogólne wskazówki

[AZURE.INCLUDE [pnp-header](../includes/guidance-pnp-header-include.md)]

## <a name="overview"></a>Omówienie

Wszystkie aplikacje, które komunikować się z usługami zdalnego i zasoby musi być poufne aby przejściowych błędów. To jest szczególnie w przypadku aplikacje, które działają w chmurze, gdzie rodzaj środowiska i łącznością w Internecie oznacza, że mogą napotkać częściej są następujące typy błędów. Błędy przejściowych obejmują tymczasowej utratę łączności sieciowej składniki i usługi, tymczasowej niedostępności usługi lub przekroczenia limitu czasu, które mogą pojawić się, gdy usługa jest zajęty. Te błędy są często własny poprawianie, a jeśli opóźnieniem odpowiednie powoduje powtarzanie akcji jest prawdopodobnie powiodła się.

W tym dokumencie opisano ogólne wskazówki na temat obsługi błędów przejściowych. Aby uzyskać informacji na temat obsługi błędów przejściowych podczas korzystania z usługi Microsoft Azure zobacz [wskazówki ponów próbę Azure specyficzne dla usługi](best-practices-retry-service-specific.md).

## <a name="why-do-transient-faults-occur-in-the-cloud"></a>Dlaczego przejściowych błędów są występuje w chmurze?

Błędy przejściowych mogą występować w dowolnym środowisku systemu operacyjnego lub platformy i widok dowolnego rodzaju aplikacji. W przypadku rozwiązań że Uruchom na lokalny, infrastruktura lokalnego, wydajności i dostępności aplikacji i jej elementów jest zazwyczaj zachowywane dzięki nadmiarowości drogich i często w obszarze używanych sprzętu i składniki i zasoby są znajdującej się w pobliżu każdego innego. Podczas awarii dzięki temu rzadziej, nadal może spowodować błędy przejściowych - i nawet awarii za pośrednictwem nieprzewidzianych, takich jak zewnętrzne źródło zasilania lub problemów z siecią lub innych sytuacjach awarii.

Hostingu chmury, łącznie z systemami prywatne chmury mogą oferować wyższe ogólnej dostępności za pomocą zasobach współużytkowanych, nadmiarowości automatyczne przejście i alokacji zasobów dynamiczne w dużej liczby węzłów obliczeń towarów. Rodzaj tych środowiskach można jednak oznacza, że przejściowych błędów są częściej. Istnieje kilka powodów:

* Wiele zasobów w środowisku chmury są udostępniane, a dostęp do tych zasobów podlega ograniczania w celu ochrony tego zasobu. Niektóre usługi będzie odmówić połączeń podczas ładowania wzrośnie do określonego poziomu lub osiągnięta maksymalna przepustowość, aby zezwolić na przetwarzanie istniejących zapytań i, aby zachować wydajność usługi dla wszystkich użytkowników. Ograniczanie ułatwia zachowania jakości usługi dla sąsiadów i innych dzierżaw za pomocą udostępnionego zasobu.
* Środowiska chmury utworzono przy użyciu ogromną liczby jednostek sprzętu towaru. Przedstawianie wydajności przekazując dynamicznie Załaduj wiele jednostek komputerowych i elementów infrastruktury i dostarczanie niezawodności automatyczne odtwarzanie lub zamieniając jednostki nie powiodło się. Tego rodzaju dynamiczne oznacza, że przejściowych błędów i awarie tymczasowe połączenie czasami może wystąpić.
* Są często więcej składników sprzętu, w tym infrastruktury sieciowej, takie jak routery i urządzenia do równoważenia obciążenia, między aplikacją i zasobów i usług, które są używane. Ta dodatkowa infrastruktura od czasu do czasu można wprowadzać opóźnienie dodatkowe połączenia i usterek połączeń przejściowych.
* Parametry sieci między klientem a serwerem może być zmienną, zwłaszcza w przypadku, gdy przecina komunikacji Internet. Nawet w lokalizacji lokalnego obciążenia bardzo duży ruch może spowalniać komunikacji i powodować błędy przejściowymi połączenia.

## <a name="challenges"></a>Wyzwania
Błędy przejściowych mieć duży wpływ na znane dostępności aplikacji, nawet wtedy, gdy go dokładnie przetestowano wszystkie przewidywanych warunkach. Aby upewnić się, że hostowana w chmurze aplikacji działać prawidłowo, muszą być w stanie odpowiedzieć na następujących problemów:

* Aplikacja musi być w stanie wykrywanie błędów, gdy występują i sprawdzić, czy te błędy są prawdopodobnie przejściowych, bardziej bardzo trwałe lub końcowych się niepowodzeniem. Różne zasoby prawdopodobnie może zwrócić różnych odpowiedzi, gdy wystąpi błąd, a następnie tych odpowiedzi również mogą się różnić w zależności od kontekstu operacji. na przykład odpowiedzi na komunikat o błędzie podczas czytania z magazynu mogą być inne niż odpowiedzi na komunikat o błędzie podczas zapisywania do miejsca do magazynowania. Wiele zasobów i usług ma umów dobrze udokumentowanych przejściowych błąd. Jednak jeżeli te informacje nie są dostępne, może być trudne do znalezienia rodzaj błędu i czy jest prawdopodobnie przejściowych.
* Aplikacja muszą mieć możliwość ponowić próbę Jeśli Określa, czy ten błąd jest może być przejściowych i śledzić liczbę wystąpień operacja została wykonana ponownie.
* Aplikacja należy używać odpowiednich strategii dla ponowne próby. Ta strategia określa liczbę powtórzeń go należy ponowić próbę, opóźnienie między każdej próbie i akcje po nieudanej próby. Odpowiednią liczbę prób i opóźnienie między każdy z nich są często trudno określić i różnią się w zależności od typu zasobu, a także bieżącego warunków pracy zasobu i samej aplikacji.

## <a name="general-guidelines"></a>Ogólne wskazówki
Poniższe wskazówki pomogą zaprojektować odpowiednie błędów przejściowych przekazującą mechanizm aplikacji:

* **Sprawdź, czy są mechanizm wbudowany ponów próbę:**
  * Wiele usług zapewniają SDK lub klienta biblioteki, która zawiera błąd przejściowych obsługi mechanizmu. Zasady ponów próbę, które są używane zwykle dostosowane do rodzaju i wymagania dotyczące usługi docelowej. Możesz też interfejsów pozostałych usług może zwracać informacje, które są przydatne podczas ustalania, czy ponowienie próby jest odpowiedni i czas oczekiwania następnej próbie ponów próbę.
  * Za pomocą mechanizmu wbudowanych ponów próbę miejsce, w którym jest dostępny jeśli nie masz przejrzyste i określonych wymagań, które oznacza, że bardziej odpowiednia jest zachowanie różnych ponów próbę.
* **Określanie, czy operacji nadaje się do ponawianie próby**:
  * W przypadku błędów przejściowych (zwykle wskazywany przez charakter błędu), a jeśli istnieje co najmniej niektóre prawdopodobieństwo, że operacja powiedzie się, gdy znakuje należy tylko ponów próbę operacji. Nie ma żadnego powodu interwał ponawiania operacji, które wskazują nieprawidłowe operacji, takich jak bazy danych aktualizacji elementu, który nie istnieje, lub żądania usługi lub zasobu, która ma poniesione błąd krytyczny
  * Na ogół wykonała ponowne próby tylko miejsce, w którym można określić wzajemnego wpływu to i warunki są również zrozumienie i mogą być sprawdzone. Jeśli nie, należy pozostawić go do kodu wywołującego ponowne próby wykonania. Należy pamiętać błędy zwrócone od zasobów i usług poza kontrolę nad może się rozwijać w czasie i może być konieczne ponowne przeanalizowanie logiki wykrywania błędów przejściowych.
  * Podczas tworzenia usług lub składniki, należy rozważyć możliwość wykonywania kody błędów i komunikatów, które ułatwi klientów ustalić, czy powinien ponowienia niepowodzenia operacji. Wskazują w szczególności jeśli klienta należy ponowić próbę (prawdopodobnie według zwrócenie wartości **isTransient** ) i proponowanie odpowiednich opóźnienie następnej próbie ponów próbę. Jeśli konstruujesz usługi sieci web, warto rozważyć zwraca błędy niestandardowe zdefiniowane w ramach umów serwisowych. Mimo że klienci ogólnego może nie można odczytać, będą przydatne podczas tworzenia niestandardowych klientów.
* **Określanie liczby powtórzeń odpowiednie i interwału:**
  * Ważne jest zoptymalizować licznik i dowolny przedział z typem przypadków użycia. Jeśli nie ponowić próbę wystarczającą ilość razy, aplikacja nie będzie można ukończyć tej operacji i może wystąpić błąd. Jeżeli ponowienia zbyt wiele prób, lub z spróbuje zbyt krótki interwał między, aplikacji potencjalnie może zawierać zasobów, takich jak wątków, połączenia i pamięci przez dłuższy czas, które negatywnie wpłynąć na kondycji aplikacji.
  * Odpowiednie wartości dla przedział czasu i liczba prób ponawiania zależą od typu operacji prób. Na przykład jeśli operacji jest częścią interakcji użytkownika, interwał powinny być krótkie i tylko kilku prób próby uniknąć użytkowników oczekiwanie na odpowiedź (które posiada Otwórz połączenia i można zmniejszyć dostępność dla innych użytkowników). W przypadku operacji część długo działającego lub krytyczne przepływu pracy, gdzie anulowanie i ponownym uruchomieniem procesu jest drogich lub czasochłonne, należy czekać dłużej próbami i spróbuj ponownie kilka razy.
  * Określanie odpowiednich odstępach czasu między kolejnymi próbami jest najbardziej trudne częścią projektowania strategii pomyślnie. Strategie typowe za pomocą następujących typów interwał ponawiania:
      * **Wstecz wykładnicza wyłączone**. Aplikacja oczekuje przez krótki czas przed pierwszym ponów próbę i sposób wykładniczy zwiększenie czasu między kolejnymi próbami kolejne. Na przykład go ponowić próbę po 3 sekundy, 12 sekund, 30 sekund i tak dalej.
      * **Przyrostowe odstępach**. Godzina krótka przed pierwszym ponów próbę i stopniowo zwiększając czasu między kolejnymi próbami kolejnych oczekiwania przez aplikację. Na przykład go Powtórz operację po 3 sekundy, 7 sekund, 13 sekund i tak dalej.
      * **Regularnych odstępach**. Ten sam okres czasu między każdej próbie oczekiwania przez aplikację. Na przykład go ponowić operację co 3 sekundy.
      * **Natychmiastowe ponów próbę**. Czasami przejściowych błąd jest bardzo krótki, prawdopodobnie spowodowane przez zdarzenie, takie jak konfliktu pakietu sieci lub kolekcji w składniku sprzętu. W tym przypadku natychmiast ponawianie operacji jest odpowiednie, ponieważ może się niepowodzeniem występują wyczyszczenie błędu w czasie, potrzebny zastosowanie do zebrania i wysłać wezwanie na następny. Nigdy nie powinny być więcej niż jednej natychmiastowego ponawiania próby i należy przełączeniu do alternatywnych strategii, takich jak przykład wykładniczego wstecz wyłączenia lub alternatywnych akcje, jeśli natychmiastowego ponawiania nie powiedzie się.
      * **Losowe generowanie**. Dowolny ponów próbę, które strategii wymienionych powyżej może zawierać losowe generowanie aby zapobiec wielu wystąpień klienta wysyłanie kolejnych ponownych prób w tym samym czasie. Na przykład jedno wystąpienie ponowić operację po 3 sekundy, 11 sekund, 28 sekund i tak dalej podczas kolejnego wystąpienia ponowić operację po 4 sekundach 12 sekund, 26 sekund i tak dalej. Losowe generowanie jest techniką przydatne, które mogą być łączone z innych strategii.  
  * Jako wytyczne ogólne przy użyciu wykładniczego wycofywania strategii dla operacji tła i strategii ponów próbę interwału natychmiastowe lub zwykła interakcyjnych operacji. W obu przypadkach należy wybrać opóźnienie i liczby powtórzeń tak, aby maksymalny czas oczekiwania dla wszystkich ponowienia mieści się wymaganie wymagane opóźnienie zakończenia do końca.
  * Brać pod uwagę kombinację wszystkie czynniki, które współtworzyć ogólny maksymalny limit czasu dla operacji próbowano. Te czynniki obejmują czas nie powiodło się połączenia w celu uzyskania odpowiedzi (zwykle ustawiany przez wartość limitu czasu na komputerze klienckim) oraz opóźnienie między ponawiania próby i maksymalna liczba prób. Suma tych godzinach może spowodować bardzo dużych operacji ogólnego czasu, zwłaszcza gdy przy użyciu funkcji wykładniczej opóźnienie strategia miejsce, w którym prób interwał między rozwoju szybko po każdej awarii. Jeśli proces musi spełniać określone Umowa dotycząca poziomu usług (SLA), ogólny czas operacji, w tym limity czasu i opóźnienia, muszą być w tym zdefiniowane w umowie SLA
  * Strategie over-Aggressive ponów próbę, które mają zbyt krótkich odstępach lub zbyt może prób, może mieć negatywny wpływ na zasobu docelowego lub usługi. Może to uniemożliwić zasób lub usługę Odzyskiwanie ze stanu przeciążony, a będzie blokowanie lub odrzucać żądania. Ten wyniki w okręgu vicious miejsce, w którym bardziej żądania są wysyłane do zasobu lub usługi, a w związku z tym możliwość odzyskiwanie dodatkowo jest ograniczona.
  * Wziąć pod uwagę przekroczenia limitu czasu operacji podczas wybierania interwały ponawiania, aby uniknąć włączania kolejne próby od razu (na przykład limit czasu jest podobne do interwał ponawiania). Również wziąć pod uwagę należy zachować całkowity możliwe okres (limit czasu oraz interwał ponawiania) do pod określonym całkowity czas. Operacje, które mają niezwykle krótkim lub długim bardzo limity czasu może mieć wpływ jak długo trwa do oczekiwania i jak często ponowić próbę.
  * Typ wyjątku oraz wszystkie dane, które zawiera lub kody błędów i komunikaty zwracane przez usługę, aby zoptymalizować interwał i liczba prób. Na przykład niektóre wyjątki lub błędu kody (takich jak HTTP kod 503 Usługa niedostępna z nagłówkiem ponów próbę po w odpowiedzi) może wskazują, jak długo trwa może być ostatni błąd, lub gdy usługa nie powiodło się i nie będzie odpowiadać na wszystkie kolejne próby.
* **Unikaj ochrony przed wzorców**:
  * W znacznej większości przypadków należy unikać implementacji zawierające zduplikowane warstwy kodu ponów próbę. Tego uniknąć projekty zawierające kaskadowe mechanizmy ponów próbę lub który zaimplementować ponów próbę na każdym etapie operację, która obejmuje hierarchię żądania, jeśli nie masz określonych wymagań tego zapotrzebowania. W tych szczególnych okoliczności za pomocą zasad zapobiegania nadmiarowe liczby prób i opóźnienie okresów i upewnij się, że zrozumienie skutków. Na przykład jeśli jeden składnik wysyła żądanie do innego, która następnie uzyskuje dostęp do usługi docelowej, a zaimplementować ponów próbę z liczbą trzech na obu połączeń zostaną wyświetlone dziewięciu ponów próbę próbuje w sumy usługę. Wiele usług i zasoby wdraża mechanizm wbudowany ponów próbę i należy sprawdzić, jak wyłączyć lub zmodyfikować to, jeśli musisz zaimplementować ponowne próby wyższego poziomu.
  *  Nigdy nie zaimplementować mechanizm nieograniczone ponów próbę. To jest prawdopodobnie zapobiec zasób lub usługę Odzyskiwanie z sytuacji przeciążeń i powodować ograniczania i odrzucone połączenia, aby kontynuować przez dłuższy czas. Za pomocą określoną liczbą lub ponowne próby lub zaimplementować deseniu, takich jak [rozmieszczenie](http://msdn.microsoft.com/library/dn589784.aspx) umożliwia usługę, aby odzyskać.
  * Uruchamianie natychmiastowego ponawiania nigdy nie więcej niż jeden raz.
  * Unikaj używania interwał ponawiania zwykła, zwłaszcza w przypadku, gdy masz dużej liczby ponownych prób podczas uzyskiwania dostępu do usług i zasobów platformy Azure. Optymalne podejście jest wykładniczego wycofywania strategii z możliwością podziału elektrycznego w tym scenariuszu.
  * Zapobieganie wielu wystąpień tego samego klienta lub wielu wystąpień różnych klientów, wysyłanie ponowne próby w tym samym czasie. Jeśli jest to może nastąpić, należy wprowadzić losowe generowanie interwały ponów próbę.
* **Testowanie strategii ponów próbę i wdrożenia usługi:**
  * Upewnij się, że w pełni przetestowaniu implementacji strategii ponów próbę w obszarze wiele określonych okolicznościach jak to możliwe, zwłaszcza w przypadku zarówno aplikacji i zasobów docelowej lub usług używanych obciążeniu skrajnych. Aby sprawdzić zachowanie podczas testowania, można wykonywać następujące czynności:
      * Wprowadzić błędów przejściowych i innych niż zmiennych w usłudze. Na przykład wysyłanie nieprawidłowe żądania lub Dodaj kod, który wykrywa test żądania i odpowiedzi z różnymi typami błędy. Na przykład przy użyciu TestApi, zobacz [Błąd uruchomienie testowanie za pomocą TestApi](http://msdn.microsoft.com/magazine/ff898404.aspx) i [Wprowadzenie do TestApi — część 5: API uruchomienie błędów kodu zarządzanego](http://blogs.msdn.com/b/ivo_manolov/archive/2009/11/25/9928447.aspx).
      * Tworzenie makiety zasobu lub usługa, która zwraca zakres błędy, które może zwrócić rzeczywisty usługi. Upewnij się, obejmuje wszystkie typy błędu strategii ponów próbę przeznaczony do wykrywania.
      * Wymuszanie przejściowych błędów tymczasowo wyłączając lub przeciążenie usługę, jeśli jest niestandardowe usługa, która została utworzona i wdrożone (użytkownik nie należy, oczywiście próbować przeciążeń zasobów udostępnionych lub udostępnionych usług Azure).
      * Na podstawie HTTP interfejsów API warto rozważyć użycie biblioteki FiddlerCore w swojej testy automatyczne do zmieniania wyniku żądania HTTP, dodając godziny dodatkowe obie strony lub zmieniając odpowiedzi (na przykład kod stanu HTTP, nagłówki, treści i inne czynniki). Dzięki temu deterministyczne badania podzbiór warunków uszkodzenia czy przejściowych błędy lub innego typu błędu. Aby uzyskać więcej informacji zobacz [FiddlerCore](http://www.telerik.com/fiddler/fiddlercore). Przykłady sposobu używania biblioteki, szczególnie klasy **HttpMangler** sprawdzić [Kod źródłowy Azure SDK miejsca do magazynowania](https://github.com/Azure/azure-storage-net/tree/master/Test).
      * Wykonywanie współczynnik obciążenia wysoki i równoczesne testy upewnij się, że mechanizm ponów próbę i strategii działa poprawnie pod tymi warunkami nie mieć negatywny wpływ na działanie klienta i powodować krzyżowemu między żądaniami.
* **Zarządzanie ponów próbę konfiguracji zasad:**
  * _Spróbuj ponownie zasad_ to połączenie wszystkich elementów strategii ponów próbę. Definiuje mechanizm wykrywania, która określa, czy błąd jest prawdopodobnie przejściowych, typ interwału za pomocą (na przykład zwykłą, wykładniczego wstecz wyłączenia i losowe generowanie), wartości rzeczywiste interwału i liczba spróbuj ponownie.
  * Ponowne próby musi realizowane w różnych miejscach aplikacji nawet najprostsze i w każdej warstwie bardziej złożonych aplikacji. Zamiast słabo kodowania elementy każdej zasady w różnych lokalizacjach, warto rozważyć użycie punktu centralnego do przechowywania wszystkich zasad. Na przykład przechowywać wartości, takie jak interwał i liczba w plikach konfiguracyjnych aplikacji prób, przeczytaj ich w czasie rzeczywistym i programowy Tworzenie zasad ponów próbę. Ułatwia do zarządzania ustawieniami, a także modyfikowanie i dostosować wartości w celu reagować na zmieniające się wymagania i scenariuszy. Jednak projektowanie system w celu przechowywania wartości zamiast rereading konfiguracji plik zawsze i upewnij się, że odpowiednie wartości domyślne są używane, jeśli wartości nie można uzyskać z konfiguracji.
  * W aplikacji usług w chmurze Azure warto rozważyć przechowywania wartości, które służą do tworzenia zasad ponów próbę w czasie rzeczywistym w pliku konfiguracji usługi, tak aby mogą być zmieniane bez konieczności ponownego uruchamiania aplikacji.
  * Korzystać z wbudowanych lub domyślnego strategii ponów próbę dostępna w kliencie interfejsy API używasz, ale tylko wtedy, gdy są one odpowiednie dla danego scenariusza. Strategie są zwykle ogólnego przeznaczenia. W niektórych scenariuszach mogą być wymagane jest, ale w innych sytuacjach może oferuje gamę opcje odpowiednio do określonych potrzeb użytkownika. Należy zrozumieć, jak ustawienia wpłynie aplikację za pomocą badania do określenia najbardziej odpowiednie wartości.
* **Zaloguj się i śledzenie błędów przejściowych i innych niż zmiennych:**
  * W ramach strategii ponów próbę obejmują obsługi wyjątków i innych oprzyrządowania, który loguje się podczas prób ponów próbę. Podczas rzadkie błędach przejściowych i spróbuj ponownie mają się spodziewać i nie wskazują problem, regularne i zwiększanie liczby ponowne próby są często wskaźnik problem, który może spowodować błąd lub jest obecnie wpływ na wydajność aplikacji i dostępności.
  * Zaloguj się przejściowych błędów jako wpisy Ostrzeżenie zamiast wpisy błędu tak, aby systemów monitorowania nie wykrywa je jako błędy aplikacji, które mogą spowodować fałszywych alertów.
  * Należy rozważyć, czy przechowywania wartości we wpisach z dziennika, które wskazuje, jeśli ponowne próby zostały spowodowane przez ograniczania w usłudze lub innych typów błędów, takich jak błędy połączenia tak, aby odróżnić je podczas analizy danych. Większa liczba błędów ograniczania często jest wskaźnik błąd projektu w aplikacji lub trzeba przełączać się do usługi premium, która oferuje sprzęcie.  
  * Należy rozważyć, czy pomiaru i ogólny czas potrzebny na operacje, które zawierają mechanizmu ponów próbę logowania. Jest to dobry wskaźnik efekt przejściowych błędów na czas odpowiedzi użytkownika, opóźnienie procesu i efektywności przypadków użycia aplikacji. Również dziennika liczba prób wystąpił w celu zrozumienia czynniki, które przyczynić się do pola Czas reakcji.
  * Należy rozważyć, czy wykonywanie telemetrycznego i monitorowanie systemu, w którym można podnieść alerty po zmianie liczby i współczynnik błędów, średnia liczba prób lub rośnie ogólny czas potrzebny operacje pomyślnie.
* **Zarządzanie operacji wykonanych ciągłe się nie powieść:**
  * Będzie okoliczności miejsce, w którym operacji w dalszym ciągu się nie powieść w każdej próbie i koniecznie należy rozważyć, jak będą obsługiwać takiej sytuacji:
      * Mimo że strategii ponów próbę określi maksymalną liczbę razy operacja powinna zostać wykonana ponownie, nie uniemożliwia stosowania powtarzających się operację, z taką samą liczbę prób. Na przykład jeśli Usługa przetwarzania zamówienia kończy się niepowodzeniem z powodu błędu krytycznego trwale wstawiana poza akcji, strategii ponów próbę może wykryć limit czasu połączenia i należy rozważyć, czy należy przejściowych błędów. Kod będzie ponowić próbę określoną liczbę razy, a następnie nadaj w górę. Jednak podczas innego odbiorcy umieści zamówienia, operację wypróbowywania ponownie — nawet jeśli jest upewnić się, że zawsze kończą się niepowodzeniem.
      * Aby uniknąć ciągłego ponowne próby operacji, które ciągłe się nie powieść, warto rozważyć implementacji [rozmieszczenie deseniem](http://msdn.microsoft.com/library/dn589784.aspx). W tym deseniu jeśli próg jest większa niż liczba porażek w określonym przedziałem czasu żądania są zwracane do rozmówcy natychmiast jako błędy, bez próby dostępu do awarii zasobu lub usługi.
      * Aplikacja okresowo można przetestować usługę, na podstawie przerw i z bardzo długa odstępami między żądaniami wykrywanie stał się dostępny. Odpowiednich odstępach zależy od tego scenariusza, takich jak można operacji i rodzaj usługi i mogą być cokolwiek między kilka minut i kilka godzin. W miejscu, w którym test powiedzie się aplikacja można przywrócić normalne działanie i przekazać żądania do nowo odzyskany usługi.
      * W międzyczasie może być możliwe powrotu do kolejnego wystąpienia usługi (prawdopodobnie w różnych centrum danych lub aplikacji), użyć podobne usługi, która oferuje zgodne funkcje (prawdopodobnie prostsze) lub operacji niektórych alternatywnych w nadzieję, że usługa staną się dostępne wkrótce. Na przykład może być należy przechowywać żądania usługi w kolejce lub danych przechowywania i odtwarzania ich później. W przeciwnym razie może być możliwe przekierować użytkownika z wystąpieniem innych aplikacji, obniżyć wydajność aplikacji, ale nadal oferowanie funkcji przyjęcia lub po prostu zwrotu prezentowanie komunikat z informacją użytkownika aplikacja nie jest dostępne w.

* **Inne zagadnienia**
  * Wybierając wartości dla liczby ponowne próby i interwał ponawiania zasad, należy rozważyć, czy jeśli działania na usługi lub zasobów jest częścią operacji długim lub wielu kroku. Może być trudne lub drogich do zadośćuczynienia wszystkie inne działania czynności, które już zakończyło się pomyślnie po jednym kończy się niepowodzeniem. W tym przypadku bardzo długi interwał i duża liczba prób można zaakceptować dopóki nie blokuje innych czynności przy wciśniętym lub blokowania ograniczonych zasobów.
  * Należy rozważyć, czy ponawianie tej samej operacji może spowodować niespójności w danych. Jeśli powtarzają niektórych części proces wielu kroków i operacje nie są idempotent, może spowodować naliczenie zgodne. Na przykład operację, która zwiększa wartość, powtórzyć, powoduje wygenerowanie nieprawidłowy wynik. Powtarzanie operacji wysyła wiadomość do kolejki może spowodować niespójności w wiadomości dla klientów indywidualnych Jeśli nie może wykryć zduplikowanych wiadomości. Aby tego uniknąć, upewnij się, zaprojektowanej przez poszczególne kroki jako operacja idempotent. Aby uzyskać więcej informacji o idempotency zobacz [Idempotency wzorców](http://blog.jonathanoliver.com/2010/04/idempotency-patterns/).
  * Należy rozważyć zakres czynności, które zostanie wykonana ponownie. Na przykład może być łatwiejsze do wdrożenia kodu ponów próbę na poziomie, który obejmuje kilka czynności i ponownie spróbuj je wszystkie, jeśli jedną kończy się niepowodzeniem. Jednak w ten sposób może spowodować problemy idempotency lub niepotrzebne wycofywania operacji.
  * Jeśli wybierzesz zakres ponów próbę obejmujący kilka czynności, wziąć pod uwagę całkowity czas oczekiwania wszystkich ich podczas określania interwały ponawiania, gdy monitorowania, czas trwania i przed podnoszenie alerty dotyczące błędów.
  * Należy rozważyć, czy strategii ponów próbę wpływu sąsiadów i innych dzierżaw w udostępnioną aplikację lub podczas korzystania z zasobów i usług. Zasady rygorystyczne ponów próbę mogą powodować rosnącej liczby przejściowych błędów, aby uniemożliwić innym użytkownikom i aplikacjom współużytkowanie zasobów i usług. Analogicznie aplikacja może zależeć od polityki ponów próbę przez innych użytkowników zasobów i usług. Dla kluczowych aplikacji użytkownik chce korzystać z usług premium, które nie są udostępnione. Zapewnia większą kontrolę nad obciążenia i ograniczania wynikające z tych zasobów i usług, które ułatwiają Justowanie dodatkowe koszty.

## <a name="more-information"></a>Więcej informacji

* [Wskazówki dotyczące ponawiania specyficzne dla usługi Azure](best-practices-retry-service-specific.md)
* [Blokowanie aplikacji obsługi błędów przejściowych](http://msdn.microsoft.com/library/hh680934.aspx)
* [Rozmieszczenie deseniem](http://msdn.microsoft.com/library/dn589784.aspx)
* [Wyrównywania transakcji deseniem](http://msdn.microsoft.com/library/dn589804.aspx)
* [Desenie Idempotency](http://blog.jonathanoliver.com/2010/04/idempotency-patterns/)
