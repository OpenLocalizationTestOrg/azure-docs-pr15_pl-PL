<properties
   pageTitle="Lista kontrolna dostępność | Microsoft Azure"
   description="Lista kontrolna zawiera wskazówki dotyczące dostępności problemy podczas projektowania."
   services=""
   documentationCenter="na"
   authors="dragon119"
   manager="masimms"
   editor=""
   tags=""/>

<tags
   ms.service="best-practice"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="na"
   ms.date="07/13/2016"
   ms.author="masashin"/>

# <a name="availability-checklist"></a>Dostępność — Lista kontrolna

[AZURE.INCLUDE [pnp-header](../includes/guidance-pnp-header-include.md)]

## <a name="application-design"></a>Projekt aplikacji

- **Unikaj dowolny pojedynczy punkt awarii.** Wszystkie składniki, usług, zasobów i wystąpienia obliczeń należy wdrożyć jako wielu wystąpień, aby uniemożliwić wpływu na dostępność pojedynczego punktu awarii. Ta opcja uwzględnia mechanizmy uwierzytelniania. Projektowanie aplikacji można konfigurować, aby użyć wielu wystąpień i automatyczne wykrywanie błędów i przekierować żądania — nie można wystąpieniach miejsce, w którym platformie nie robi tego automatycznie.
- **Których przedstawiany obciążenie pracą na różnych Umowa dotycząca poziomu usług.** Jeśli usługa składa się z obciążeń pracą krytyczne i mniej krytyczne, zarządzać nimi inaczej i określ funkcje usługi oraz liczbę wystąpień, aby spełnić wymagania dotyczące ich dostępności.
- **Minimalizowanie i zrozumieć zależności między usługami.** Zminimalizować liczbę różnych usługach używany, jeśli to możliwe i upewnij się, że zapoznać się ze wszystkimi zależności funkcji i usług, które istnieje w systemie. Zawiera rodzaj zależności i ich wpływu awarii, lub zmniejszenia wydajności w każdej z nich na ogólną aplikacji. Microsoft gwarancje co najmniej 99,9% dostępności dla większości usług, ale to oznacza, że każdy dodatkowe usługę, w której aplikacja zależy od potencjalnie zmniejsza dostępności SLA systemu 0,1 procent.
- **Projektowanie zadań i wiadomości mają być idempotent (bezpieczne powtarzalnych), jeśli to możliwe**, który duplikowany żądania nie spowoduje problemów. Na przykład usługa może działać jako klient obsługujący wiadomości wysłane jako żądania przez inne części systemu, które działają jak producenci. Jeśli konsumenta nie powiedzie się, po przetworzeniu wiadomości, ale przed potwierdzeniem została przetworzona, producent może przesłać powtarzania wniosek, który może być obsługiwane przez inne wystąpienie konsumentów. Z tego powodu konsumentów i działania, które wykonują powinny być idempotent tak, aby Powtarzanie operacji poprzednio obliczoną nie jest renderowana wyniki nieprawidłowe. Może to oznaczać wykrywanie zduplikowane wiadomości lub zapewnianie spójności za pomocą optymistyczny sposobem konfliktów.
- **Za pomocą brokera wiadomości, korzystający szybkiej transakcji krytyczne.** Wiele scenariusze inicjowania zadań lub uzyskiwania dostępu do usługi zdalnej korzystanie z wiadomości w celu przekazania instrukcje między aplikacją i docelowej usługi. Aby uzyskać optymalną wydajność aplikacja powinno być możliwe wysłać wiadomość, a następnie powróć do procesu więcej żądania, bez konieczności oczekiwanie na odpowiedź. Aby zagwarantować dostarczania wiadomości, systemu obsługi wiadomości powinien zawierać wysokiej dostępności. Azure kolejkach Bus usługi zaimplementować znaczenie _co najmniej raz_ . Oznacza to, że każda wiadomość opublikowane w kolejce nie zostaną utracone, mimo że kopie mogą być dostarczane w niektórych okolicznościach. W przypadku przetwarzania wiadomości idempotent (patrz poprzedniego elementu), powtórzyć dostarczania nie powinny być problem.
- **Projektowanie aplikacji bezpiecznie rozkładu** osiągnięcia ograniczenia zasobów oraz odpowiednie działania aby zminimalizować dla użytkownika. W niektórych przypadkach obciążenie aplikacji może przekroczyć możliwości jedną lub więcej części, co powoduje zmniejszenia dostępność i nie powiodło się połączenia. Skalowanie może pomóc w to zmniejszyć, ale może ona osiągnąć limit narzucane przez innych czynników, takich jak dostępność zasobu lub koszt. Projektowanie aplikacji tak, aby w takiej sytuacji go automatycznie pogarsza bezpiecznie. Na przykład w systemie handlu elektronicznego, jeśli podsystemu przetwarzania zamówień znajduje się w obszarze szczepu (lub nawet nie powiodło się całkowicie), można go tymczasowo wyłączyć umożliwienie inne funkcje (na przykład przeglądania katalogu produktów) aby kontynuować. Może to być należy odroczyć żądania podsystemu błędu, na przykład nadal umożliwiające klientom przesyłanie zamówień, ale zapisując je później przetwarzania, gdy podsystemu zamówień jest dostępna ponownie.
- **Bezpiecznie obsługiwać szybkie serii zdarzeń.** Większość aplikacji muszą obsługiwać zróżnicowanymi obciążeń pracą w czasie, takich jak wartości po pierwsze rano w aplikacji biznesowych lub po wydaniu nowego produktu w witrynie handlu elektronicznego. Automatyczne skalowanie może ułatwić obsługę Załaduj, ale może upłynąć trochę czasu, kolejne wystąpienia do trybu online i żądania obsługi. Zapobieganie seria szybkiego i nieoczekiwane działania przeciążając uda się rozpoznać aplikacji: Projektowanie go do kolejki żądań usługi używa i obniżyć bezpiecznie, gdy kolejki są blisko pełnego wykorzystania możliwości. Upewnij się, wystarczające wydajnością i pojemnością dostępne jest warunkach inne niż seria Opróżnij kolejek wiadomości i obsługiwać zaległych żądań. Aby uzyskać więcej informacji zobacz [opartych na kolejkach deseniu bilansowania obciążenia](https://msdn.microsoft.com/library/dn589783.aspx).

## <a name="deployment-and-maintenance"></a>Wdrażanie i konserwacja

- **Wdrażanie wielu wystąpień ról dla każdej usługi.** Firma Microsoft udostępnia gwarancje dostępność dla usług, które można tworzyć i wdrażać, ale te gwarancje obowiązują tylko w przypadku wdrażania co najmniej dwa wystąpienia poszczególnych ról w usłudze. Dzięki temu jedna rola jest niedostępny, podczas gdy drugi pozostaje aktywna. Jest to szczególnie ważne, jeśli chcesz wdrożyć aktualizacje z systemem live bez przerywania działania klientów; wystąpienia można podjąć w dół i uaktualnione pojedynczo podczas innych nadal online.
- **Obsługi aplikacji w wielu centrach danych.** Chociaż bardzo niewielką jest możliwe dla całego centrum danych przejść do trybu offline za pomocą zdarzenia, takich jak naturalne awarii lub awaria internetowego. Ważnych aplikacji powinna być obsługiwana w więcej niż jednym centrum danych zapewniające maksymalną dostępność. To również zmniejszyć opóźnienie dla użytkowników lokalnych i udostępniają dodatkowe elastyczność podczas aktualizowania aplikacji.
- **Automatyzowanie i wdrażanie i konserwacja zadania testowego.** Aplikacje rozproszone się składać z wielu części, które muszą wspólnie pracować. Wdrożenie powinny w związku z tym zautomatyzować, przy użyciu przetestowane i sprawdzone mechanizmy, takie jak skryptów i wdrażania aplikacji. Tych aktualizacji i sprawdzić poprawność konfiguracji i zautomatyzować proces wdrażania. Technika stosuje się do przeprowadzania aktualizacji całości lub części aplikacji. Ważne jest aby przetestować wszystkie te procesy w pełni, aby upewnić się, że błędy nie powodują dodatkowe przestoje. Wszystkie narzędzia wdrażania musi mieć odpowiednie zabezpieczenia ochrony wdrożonej aplikacji; Definiowanie i wymuszanie stosowania zasad wdrażania starannie zminimalizować interwencja.
- **Warto rozważyć użycie funkcji roboczych i produkcyjnych platformy** miejsce, w którym są dostępne. Na przykład za pomocą usług w chmurze Azure środowiskach roboczych i produkcyjnych umożliwia aplikacji można przełączyć od jednego do drugiego natychmiast przez wirtualnej zamiany adres IP (VIP wymiany). Jednak jeśli wolisz etapu lokalnego, lub jednocześnie wdrażać różnych wersji aplikacji i stopniowo migrowania użytkowników, nie można używać operacji wymiany VIP.
- **Zastosuj zmiany konfiguracji bez odtwarzanie** wystąpienie, jeśli to możliwe. W większości przypadków można zmienić ustawienia konfiguracji dla aplikacji Azure lub usługi bez konieczności roli, należy ponownie uruchomić. Rola uwidaczniają zdarzenia, które można rozwiązać do wykrywania zmian w konfiguracji i zastosowania ich do elementów w aplikacji. Jednak niektóre zmiany w ustawieniach platformy core wymagają roli, należy ponownie uruchomić. Tworząc składniki i usługi, zwiększyć dostępność i zminimalizować przestoje przez ich tak, aby zaakceptować zmiany w ustawieniach konfiguracji bez konieczności aplikacji jako całość ponownego projektowania.
- **Za pomocą uaktualnienia domen zero przestojów podczas aktualizacji.** Azure obliczania jednostki, takich jak sieci web oraz role pracownika są przeznaczone do uaktualnienia domeny. Uaktualnij wystąpienia roli grupa domen ze sobą tak, aby podczas odbywa się stopniowe aktualizacji, każdej roli w domenie uaktualnienia jest zatrzymana, zaktualizowane i ponownie uruchomić z kolei. Pozwala to zmniejszyć ich wpływu na dostępność aplikacji. Możesz określić, jak wiele domen uaktualnienia świadczyć usługi po wdrożeniu usługi.

    > [AZURE.NOTE] Role również są rozmieszczane domen błędów, z których każdy będzie zależy rozsądnie z innych domen błędów pod względem stojaków serwera, zasilania i chłodzenia świadczenia, aby zminimalizować wystąpienia awarii wpływających na wszystkie wystąpienia roli. Rozkład ten jest tworzony automatycznie, a nie nad nim kontroli.

- **Konfigurowanie zestawów dostępność dla Azure maszyn wirtualnych.** Umieszczania dwóch lub więcej maszyn wirtualnych w tej samej dostępność zestawu gwarantuje, że te maszyn wirtualnych nie zostanie wdrożony do tej samej domeny błędów. Aby zmaksymalizować dostępność, możesz utworzyć wielu wystąpień każdej krytycznej maszyny wirtualnej używane przez system i umieść te wystąpienia w ten sam zestaw dostępności. Jeśli używasz wielu maszyn wirtualnych służących do różnych celów, utworzyć dostępność ustawić dla każdego maszyn wirtualnych. Dodawanie wystąpienia poszczególnych maszyn wirtualnych do każdego zestawu dostępności. Na przykład jeśli utworzono osobnych maszyn wirtualnych ma pełnić rolę serwer sieci web i serwer raportowania Tworzenie dostępności Ustaw serwer sieci web i dostępność innego zestawu na serwerze raportów. Dodawanie wystąpienia serwerze sieci web wirtualnej dostępności serwera sieci web ustawianie i dodać wystąpienia raportowania maszyny wirtualnej serwera do raportowania zestawu dostępność serwera.

## <a name="data-management"></a>Zarządzanie danymi

- **Korzystać z danych** za pośrednictwem lokalnych i geograficznych nadmiarowości. Dane w magazynie Azure są automatycznie replikowane ochrony przed utratą w razie awarii infrastruktury, a niektóre aspekty replikacja można skonfigurować. Na przykład tylko do odczytu kopie danych mogą być replikowane w więcej niż jeden regionu geograficznego (określone jako miejsca do magazynowania globalnie zbędne dostęp do odczytu lub GRS pomoc Zdalna). Należy zauważyć, że przy użyciu GRS pomoc Zdalna opłatami dodatkowe. Aby uzyskać szczegółowe informacje zobacz [Azure ceny miejsca do magazynowania](https://azure.microsoft.com/pricing/details/storage/).
- **Użyj optymistyczny współbieżności i spójność ewentualne** to możliwe. Transakcje, że blokowanie dostępu do zasobów za pośrednictwem blokowania (pesymistyczny współbieżności) mogą być przyczyną niskiej wydajności, a znacznie zmniejszyć dostępność. Te problemy może stać się szczególnie istotne w systemów dystrybucji. W większości przypadków staranne projektowanie i technik, takich jak podziału można zminimalizować szanse powodujące konflikt aktualizacji występujące. W przypadku, gdy dane są replikowane lub jest odczytu z magazynu oddzielnie zaktualizowane, dane będą tylko po pewnym czasie spójne. Ale zalet zazwyczaj znacznie większe od możliwych ich wpływu na dostępność przy użyciu transakcji w celu zapewnienia natychmiastowej spójności.
- **Za pomocą okresowych kopii zapasowych i przywracania w chwili**i upewnij się, spełnia odzyskiwania wskazywały cel (RPO). Regularnie i automatycznie utworzyć kopię zapasową danych, które nie są zachowywane w innych miejscach i sprawdź, czy niezawodne przywróceniem zarówno danych, jak i samej aplikacji powinna zostać wykonana awarii. Replikacja danych nie jest funkcją kopii zapasowej, ponieważ błędów i niezgodności wprowadzonych przez błąd, błąd lub złośliwych działań będą replikowane we wszystkich sklepach. Proces tworzenia kopii zapasowej należy bezpiecznego ochrony danych w drodze i w magazynie. Bazy danych lub części magazynu danych zazwyczaj można odzyskać do poprzedniego punktu w czasie za pomocą dzienników transakcji. Microsoft Azure udostępnia kopii zapasowej pomieszczenia danych przechowywanych w bazie danych SQL Azure. Dane są eksportowane do pakietu kopii zapasowych w magazynie obiektów blob platformy Azure i mogą być pobierane do lokalizacji lokalnej bezpiecznego magazynu.
- **Włącz opcję wysokiej dostępności, aby zachować kopię pomocniczej Azure Redis pamięci podręcznej.** Podczas korzystania z platformy Azure Redis w pamięci podręcznej, wybierz opcję Standardowy, aby zachować pomocniczą kopię zawartości. Aby uzyskać więcej informacji zobacz [Tworzenie pamięci podręcznej w pamięci podręcznej Azure Redis](https://msdn.microsoft.com/library/dn690516.aspx).

## <a name="errors-and-failures"></a>Błędy i błędy

- **Wprowadzenie pojęcia przekroczenie limitu czasu.** Usługi i zasoby może stać się niedostępne, powoduje żądania kończy się niepowodzeniem. Upewnij się, że możesz zastosować limity czasu są odpowiednie dla poszczególnych usług lub zasobów oraz klienta, który jest uzyskiwanie do nich dostępu. (W niektórych przypadkach można umożliwienie dłuższego limitu czasu dla konkretnego wystąpienia klienta, w zależności od kontekstu i inne akcje, które wykonuje klienta.) Bardzo krótki limity czasu może spowodować operacje nadmiarowe ponów próbę dla usług i zasobów, które mają opóźnienie znaczące. Bardzo długa przekroczenia limitu czasu mogą powodować blokowanie Jeśli duża liczba żądań w kolejce, trwa oczekiwanie na usługi lub zasobu odpowiada.
- **Ponów próbę operacji nie powiodło się spowodowany przejściowych błędów.** Projektowanie strategii ponów próbę, aby uzyskać dostęp do wszystkich usług i zasobów, gdzie są standardowo nie obsługiwać połączenia automatycznego ponawiania. Za pomocą strategii, która zawiera rosnącymi opóźnienie między kolejnymi próbami jako liczba porażek podwyżki, aby zapobiec przeciążeniu zasobu i zezwolić bezpiecznie odzyskać i obsługiwać żądań w kolejce. Ciągłe ponowne próby z krótkim opóźnienia prawdopodobnie wzmocnienia problemu.
- **Wyłączanie wysyłania żądania, aby uniknąć błędów kaskadowych** , gdy usługi zdalnej są niedostępne. Czasami może występować sytuacje, w których zmiennych i innych błędów w zagrożeniami związanymi z częściową utratę części łączności pełną awarii usługi, potrwać dłużej niż oczekiwano, aby powrócić do normalnego. Ponadto jeśli usługa jest bardzo zajęty, błąd w jednej części systemu może prowadzić do kaskadowych błędów, a wynik w wielu operacjach staje się zablokowanych trzymając na krytycznego zasobów, takich jak pamięci, wątków i połączenia z bazą danych. Zamiast ciągłe ponawianie operację, której nie powiodła się, aplikacja szybko powinni zaakceptować operacji nie powiodło się i obsługiwać ten błąd. Wzór rozmieszczenie umożliwia odrzucanie żądań określonych operacji zdefiniowanych okresów. Aby uzyskać więcej informacji zobacz [Rozmieszczenie deseniem](https://msdn.microsoft.com/library/dn589784.aspx).
- **Redagowanie lub Jesień powrót do wielu składników** zmniejszeniu wpływu określonej usługi jest w trybie offline lub jest niedostępny. Projektowanie aplikacji, aby korzystać z wielu wystąpień bez mających wpływ na działanie i istniejące połączenia, jeśli to możliwe. Używanie wielu wystąpień i rozpowszechnianie żądania między nimi, wykrywanie i uniknąć wysyłania żądań do wystąpienia nie powiodło się, aby zmaksymalizować dostępność.
- **Jesień powrót do innej usługi lub przepływu pracy** w przypadku gdy jest to możliwe. Na przykład jeśli pisania do bazy danych SQL nie powiedzie się, tymczasowo przechowywania danych w magazynie obiektów blob. Podaj możliwość ponownego odtworzenia zapisywania w magazynie obiektów blob do bazy danych SQL usługę stał się dostępny. W niektórych przypadkach nieudanej operacji może być alternatywny akcję, która umożliwia aplikacji kontynuować pracę, nawet jeśli składnik lub usługę, kończy się niepowodzeniem. Jeśli to możliwe wykrywanie błędów i przekierowywanie żądań do innych usług, które mogą oferować odpowiednich funkcji alternatywny lub utworzyć kopię zapasową lub wystąpienia zmniejszonej funkcjonalności, które mogą obsługiwać podstawowych operacji podczas podstawowej usługi jest w trybie offline.

## <a name="monitoring-and-disaster-recovery"></a>Monitorowanie i odtwarzania po awarii

- **Podaj oprzyrządowania sformatowanego prawdopodobnych błędów i zdarzeń błąd** raportowania sytuacji Operatorzy. Dla błędy które mogą, ale nie został jeszcze wystąpił, dostarczyć wystarczających danych umożliwiające Operatorzy ustalić przyczynę, ograniczanie sytuację i upewnij się, że system będzie dostępna. Błędy, które już zostały wykonane aplikacji powinna zwrócić odpowiedni komunikat o błędzie do użytkownika, ale próba kontynuować uruchomiony, chociaż zmniejszonej funkcjonalności. We wszystkich przypadkach system monitorowania należy przechwycić pełna szczegółów, aby umożliwić Operatorzy dokonanie szybkiego odzyskiwania i w razie potrzeby dla projektantów i deweloperów modyfikowanie systemu zapobiec sytuacji powstawaniu ponownie.
- **Monitorowanie kondycji systemu z zastosowaniem funkcji sprawdzania.** Zdrowie i wydajności aplikacji może zmniejszyć w czasie, nie są zauważalne, dopóki go nie powiedzie się. Implementowanie sondy lub zaznacz funkcje, które są wykonywane regularnie z poza aplikacją. Kontrole może być tak proste jak pomiaru czas reakcji aplikacji jako całość, poszczególne części aplikacji, poszczególnych usług używanych przez aplikację lub pojedynczych składników. Funkcje wyboru można wykonywać procesy w celu zapewnienia ich utworzenia prawidłowe wyniki, zmierzyć opóźnienie sprawdzanie dostępności i wyodrębnianie informacji z systemu.
- **Regularnie testowanie wszystkich przejęcia awaryjnego i systemów alternatywnych** zapewnienie są dostępne i działają zgodnie z oczekiwaniami. Zmiany systemy i operacje mogą wpłynąć na awaryjnego i funkcji alternatywnych, ale wpływ może nie być wykrywana, aż głównym systemu kończy się niepowodzeniem lub staje się przeciążony. Należy je przetestować przed jest wymagane zadośćuczynienia live problemu w czasie rzeczywistym.
- **Testowanie systemów monitorowania.** Automatyzacji awaryjnego przełączania i systemów alternatywnych i ręczne wizualizacji kondycji systemu i wydajności przy użyciu pulpitów nawigacyjnych, wszystkie zależą od monitorowania i oprzyrządowania działa poprawnie. Jeśli te elementy nie, brak trafienia ważnych informacji, lub nieprawidłowych danych raportu, operator może nie okazuje się, że system nieprawidłowe lub awarie.
- **Śledzenie postępu długim przepływów pracy** i spróbuj ponownie w przypadku awarii. Przepływy pracy długim często składają się z wielu kroków. Upewnij się, że każdy krok niezależny i mogą być wycofane, aby zminimalizować prawdopodobieństwo, które muszą zostać przywrócona całego przepływu pracy lub wielu transakcji kompensacyjnych muszą być wykonywane. Monitorowanie i zarządzanie postępu długim przepływów pracy z zastosowaniem deseniu, takich jak [Harmonogram agenta opiekuna deseniu](https://msdn.microsoft.com/library/dn589780.aspx).
- **Planowanie awarii.** Upewnij się, że udokumentowane, zaakceptowanych i w pełni przetestowane planu do odzyskania z dowolnego typu błąd, który może spowodować część lub wszystkie z głównego systemu jest niedostępna. Regularnie sprawdzać procedury, a następnie upewnij się, że wszystkie Operatorzy zna proces.
